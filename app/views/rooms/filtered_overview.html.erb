<div class="container-fluid rooms-overview">

  <%= render 'layouts/breadcrumb', params: {'AperÃ§u des salles' => overview_rooms_path, @current_filters => nil} %>

  <div class="row">

    <div class="col-md-6 col-sm-12">

      <% @rooms.each do |room| %>
        <div>
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title"><%= link_to room.title, room %></h3>
            </div>
            <div class="panel-body">
              <div class="row" >
                <% room.islets.sorted.each do |islet| %>
                  <div class="col-md-12">
                    <h5><%= islet.name.present? ? link_to("Ilot #{islet}", islet_rooms_path(id: room.id, islet: islet.name, :view => params[:view], bg: params[:bg])) : 'Ilot sans nom' %></h5>
                    <div class="row islet">
                      <% islet.bays.sorted.group_by(&:lane).each do |lane, bays| %>
                        <div style="clear: both;">
                          <% bays.each do |bay| %>
                            <% bay.frames.sorted.each_with_index do |frame, index| %>
                              <div class="pull-left">
                                <div class="overviewed_frame <%= 'no-margin' if index > 0 %> <%= 'highlighted' if @frames.include?(frame) %>">
                                  <%= link_to frame.title, frame_path(frame) %>
                                </div>
                              </div>
                            <% end %>
                          <% end %>
                        </div>
                      <% end %>
                    </div>
                  </div>
                <% end %>
              </div>
            </div>
          </div>
        </div>

      <% end %>

    </div>

    <div class="col-md-6 col-sm-12">
      <% @frames.each do |frame| %>
        <% settings = {:max_u => 38,
                       :max_elts => 24,
                       :max_rj45 => 48,
                       :max_fc => 12,
                       :min_height => params[:view]=='back' ? 20 : 27 } %>
        <%= render 'frames/show', frame: frame, servers: frame.servers.to_a, settings: settings, editable: false %>
      <% end %>
    </div>

  </div>
</div>
