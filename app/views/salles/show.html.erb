<div class="container-fluid">

  <span class="pull-right">
    <!-- Vues AVANT / ARRIERE -->
    <%= link_to salle_path(@salle, :view => params[:view]=='back' ? :front : :back), class: 'btn btn-success' do %>
      <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>
      <%= (params[:view]=='back' ? 'Vue avant' : 'Vue arrière') %>
    <% end %>
    <%= link_to "#", class: 'btn btn-warning', id: 'drag-n-drop-switcher' do %>
      <span class="glyphicon glyphicon-move" aria-hidden="true"></span>
      Activer le drag'n drop
    <% end %>
    <% if params[:view]=='back' %>
      <!-- Vue AVEC OU SANS LES CONNEXIONS -->
      <%= link_to "Masquer les connexions", '#', id: 'hide_or_show_connections', class: 'btn btn-default' %>
    <% else %>
      <!-- Choix de la couleur de fond des serveurs -->
      <div class="btn-group">
        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Couleur de fond <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
          <li><%= link_to 'Modèle', salle_path(@salle, :view => 'front', bg: 'modele') %></li>
          <li><%= link_to 'Phase', salle_path(@salle, :view => 'front', bg: 'phase') %></li>
        </ul>
      </div>
    <% end %>
  </span>

  <h1>Vue par salle</h1>

  <div class="well">
    Raccourcis vers les salles :
    <% Salle.includes(:serveurs).order("title").each do |salle| %>
      <% if salle.title.present? && salle.serveurs.present? %>
        <li>
          <% if salle == @salle %>
            <%= salle.title %>
            <% else %>
            <%= link_to salle.title, salle_path(salle) %>
          <% end %>
        </li>
      <% end %>
    <% end %>
  </div>

  <%= render 'serveurs/salle', salle: @salle.title, ilots: @serveurs_par_baies %>

</div>

<%= link_to edit_salle_path(@salle), class: 'btn btn-primary' do %>
  <span class="glyphicon glyphicon-pencil"></span>
  Edit
<% end %>

<%= render 'serveurs/modal_add_element_in_baie' %>

<div class="panel panel-warning fade port_selection">

  <div class="panel-heading">Connexions</div>
  <div class="panel-body">
    <div>
      <%= form_for Connection.new, url: {action: "create", controller: "connections"}, remote: true do |f| %>
        <h5>Nouvelle connexion</h5>
        <p class="from"></p>
        <p class="to">Sélectionnez un port de destination</p>
        <%= f.submit "Valider", class: 'btn btn-warning submit_btn' %>
        <a href="#" class="btn btn-default cancel_btn" role="button">Annuler</a>
      <% end %>
    </div>
  </div>

</div>
