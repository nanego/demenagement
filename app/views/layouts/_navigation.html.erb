<%# navigation styled for Bootstrap 3.0 %>
<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">

        <a href="/" class="navbar-left"><%= image_tag 'datacenter-02.png', style: 'height: 40px;margin-top:5px;margin-right:5px;' %></a>

        <%= render 'layouts/rooms_dropdown' %>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Matériels <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><%= link_to 'Rechercher un matériel', servers_grids_path %></li>
            <li><%= link_to '+ ajout manuel', new_server_path %></li>
            <li><%= link_to '+ ajout par fichier CSV', import_csv_servers_path %></li>
            <li role="separator" class="divider"></li>
            <li class="dropdown-header">Filtrer par :</li>
            <li class="dropdown-submenu">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                Gestionnaire
              </a>
              <ul class="dropdown-menu">
                <% Gestion.order('LOWER(name) asc').each do |c| %>
                    <li <%= "class=active" if params[:gestion_id]==c.id.to_s %> >
                      <%= link_to c.name, overview_rooms_path(gestion_id: c.id, :view => params[:view], bg: (params[:bg]||'modele') ) %>
                    </li>
                <% end %>
              </ul>
            </li>
            <li class="dropdown-submenu">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                Cluster
              </a>
              <ul class="dropdown-menu">
                <li>
                  <div class="row" style="width: 600px;">
                    <% Cluster.order('LOWER(name) asc').in_groups(3).each do |clusters| %>
                        <ul class="list-unstyled col-md-4">
                          <% clusters.each do |c| %>
                              <% if c.present? %>
                                  <li <%= "class=active" if params[:cluster_id]==c.id.to_s %> >
                                    <%= link_to c.to_s, overview_rooms_path(cluster_id: c.id, :view => params[:view], bg: (params[:bg]||'modele') ) %>
                                  </li>
                              <% end %>
                          <% end %>
                        </ul>
                    <% end %>
                  </div>
                </li>
              </ul>
            </li>
          </ul>
        </li>

        <li><%= link_to 'Paramètres', modeles_path %></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <%= render 'layouts/nav_links_administration' %>
      </ul>
    </div>
  </div>
</nav>
